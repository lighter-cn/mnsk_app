<div class="main-wrapper container">
  <div class="content">
    <h2>サブスク検索</h2>
    <%# 検索 %>
    <div class="search">
      <%= search_form_for @q ,url: search_services_path do |f| %>
        <%= f.label :service_name_cont, "サブスク名" %>
        <%= f.search_field :service_name_cont %>
        <%# カテゴリー %>
        <%= f.label :category_id_eq, "カテゴリー" %>
        <%= f.collection_select(:category_id_eq , Category.all, :id, :name, {},{}) %>
        <%= f.submit "検索" %>
      <% end %>
    </div>

    <%# ソート %>
    <div class="sort">
      <%= sort_link(@q, :price, '月額') %>
      <%= sort_link(@q, :created_at, '開始日') %>
    </div>

    <div class="d-flex flex-wrap">
      <% @services.each do |service|%>
        <% if service.service_status != "deleted" %>
          <!-- card -->
          <div class="card col-12 col-sm-6 col-md-4 col-xl-3" style="width: 18rem;">
            <a href=<%= "/services/#{service.id}" %>>
              <div class="card-image-wrapper">
                <div class="card-img" style="background-image:url(<%= rails_blob_path(service.images[0]) %>)"></div>
              </div>
            </a>
            <div class="card-body">
              <span class="badge badge-pill badge-success"><%= service.category.name %></span>
              <span class="badge badge-pill badge-warning">¥<%= service.price %></span>
              <h5 class="card-title"><%= service.service_name %></h5>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
    <%= paginate @services %>
  </div>
</div>